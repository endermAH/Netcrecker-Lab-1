pipeline {
   agent any

   stages {
      stage('Clean Workspace') {
         steps {
            cleanWs()
         }
      }
      
      stage('Clone git rep') {
          steps {
              git 'https://github.com/peoplearestrong/Netcracker.git'
          }
      }

      stage('PostgreSQL installation') {
          steps {
              ansiColor('exterm') {
                  ansiblePlaybook(
                      playbook: '/root/.jenkins/workspace/netcracker/roles/psql-vps-playbook.yml'
                      inventory: '/root/.jenkins/workspace/netcracker/inventory.ini'
                      colorized: true
                  )
              }
          }
      }

      stage('Liferay installation') {
          steps {
              ansiColor('exterm') {
                  ansiblePlaybook(
                      playbook: '/root/.jenkins/workspace/netcracker/roles/liferay-vps-playbook.yml'
                      inventory: '/root/.jenkins/workspace/netcracker/inventory.ini'
                      colorized: true
                  )
              }
          }
      }
   }
}